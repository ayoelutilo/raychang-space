"use strict";const isTouchDevice="ontouchstart"in document.documentElement,isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,loadingEl=document.querySelector(".loading"),viewportEl=document.querySelector(".viewport"),containerEl=viewportEl.querySelector(".container"),contentEl=containerEl.querySelector(".markdown-html"),menuEl=document.querySelector(".menu"),pageAudio=new Audio("/public/assets/audio/page.mp3");function removeElement(el){el.parentNode.removeChild(el)}function disableScroll(){document.body.style.overflow="hidden"}function enableScroll(){document.body.style.overflow=""}function smoothScroll(){viewportEl.classList.add("SmoothScroll"),new SmoothScroll({target:containerEl,scrollEase:.08,maxOffset:500})}function activateHoverInteraction(els){contentEl.classList.add("hover-interaction")}function getMarkdownUrl(){const title=document.title;return"Ray Chang Space"===title?"https://raw.githubusercontent.com/rayc2045/raychang-space/master/README.md":"Draggable To-do List"===title?"https://raw.githubusercontent.com/rayc2045/draggable-todoList/master/README.md":`https://raw.githubusercontent.com/rayc2045/${title.toLocaleLowerCase().replaceAll(" ","-")}/master/README.md`}async function renderContent(url){const res=await fetch(url),text=await res.text(),md=window.markdownit();contentEl.innerHTML=md.render(text).replaceAll("&lt;!-- ",'<div style="display:none;"').replaceAll(" --&gt;","</div>"),document.querySelectorAll(".markdown-html a").forEach(a=>{a.target="_blank",a.rel="noreferrer noopener"})}function resizeBodyHeight(){document.body.style.height=viewportEl.scrollHeight+"px"}async function endLoading(delay=0){await new Promise(resolve=>{setTimeout(()=>{loadingEl.classList.add("animated"),resolve()},1e3*delay)}),await new Promise(resolve=>{setTimeout(()=>{removeElement(loadingEl),resolve()},1e3*delay+1500)})}function appendCircle(e,element,duration=1.5){const circle=document.createElement("div");circle.classList.add("circle");const circleOffset=.25*document.body.getBoundingClientRect().width;let customCursorOffset=-.004*document.body.getBoundingClientRect().width;isTouchDevice&&(customCursorOffset=0),circle.style.left=`${e.pageX-circleOffset-customCursorOffset}px`,circle.style.top=`${e.pageY-circleOffset-customCursorOffset}px`,circle.style.animationDuration=`${duration}s`,element.appendChild(circle),setTimeout(()=>removeElement(circle),1e3*duration)}function showMenu(e){e.preventDefault(),menuEl.classList.remove("hide");const windowWidth=window.innerWidth,windowHeight=window.innerHeight,menuWidth=menuEl.getBoundingClientRect().width,menuHeight=menuEl.getBoundingClientRect().height,offset=5;let menuPosX=`${e.clientX+5}px`,menuPosY=`${e.clientY+5}px`;e.clientX+5+menuWidth>windowWidth&&(menuPosX=`${e.clientX-5-menuWidth}px`),e.clientY+5+menuHeight>windowHeight&&(menuPosY=`${e.clientY-5-menuHeight}px`),menuEl.style.left=menuPosX,menuEl.style.top=menuPosY}function hideEl(el){el.classList.add("hide")}function playAudio(audio,volume=1){audio.currentTime=0,audio.volume=volume,audio.play()}document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.oncontextmenu=()=>!1,disableScroll(),window.onscroll=()=>hideEl(menuEl),window.onload=async()=>{const markdownUrl=getMarkdownUrl();if(await renderContent(markdownUrl),!isTouchDevice){const aEls=document.querySelectorAll("a");activateHoverInteraction(aEls),smoothScroll()}await endLoading(),enableScroll(),resizeBodyHeight()},window.onresize=()=>{hideEl(menuEl),resizeBodyHeight()},containerEl.onmousedown=e=>{1===e.which&&appendCircle(e,containerEl)},document.oncontextmenu=e=>{if(e.target.hasAttribute("href"))return!1;showMenu(e)},document.onmousedown=e=>{e.target.hasAttribute("href")||hideEl(menuEl)},document.onmouseup=e=>{e.target.hasAttribute("href")&&(playAudio(pageAudio),hideEl(menuEl),3===e.which&&window.open(e.target.href,"_blank"))};